{"ast":null,"code":"'use strict';\n\nconst ErrorReportingMixinBase = require('./mixin-base');\n\nconst PositionTrackingPreprocessorMixin = require('../position-tracking/preprocessor-mixin');\n\nconst Mixin = require('../../utils/mixin');\n\nclass ErrorReportingPreprocessorMixin extends ErrorReportingMixinBase {\n  constructor(preprocessor, opts) {\n    super(preprocessor, opts);\n    this.posTracker = Mixin.install(preprocessor, PositionTrackingPreprocessorMixin);\n    this.lastErrOffset = -1;\n  }\n\n  _reportError(code) {\n    //NOTE: avoid reporting error twice on advance/retreat\n    if (this.lastErrOffset !== this.posTracker.offset) {\n      this.lastErrOffset = this.posTracker.offset;\n\n      super._reportError(code);\n    }\n  }\n\n}\n\nmodule.exports = ErrorReportingPreprocessorMixin;","map":null,"metadata":{},"sourceType":"script"}