{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.css = void 0;\n\nvar utils_1 = require(\"../utils\");\n\nfunction css(prop, val) {\n  if (prop != null && val != null || // When `prop` is a \"plain\" object\n  typeof prop === 'object' && !Array.isArray(prop)) {\n    return utils_1.domEach(this, function (el, i) {\n      if (utils_1.isTag(el)) {\n        // `prop` can't be an array here anymore.\n        setCss(el, prop, val, i);\n      }\n    });\n  }\n\n  return getCss(this[0], prop);\n}\n\nexports.css = css;\n/**\n * Set styles of all elements.\n *\n * @private\n * @param el - Element to set style of.\n * @param prop - Name of property.\n * @param value - Value to set property to.\n * @param idx - Optional index within the selection.\n */\n\nfunction setCss(el, prop, value, idx) {\n  if (typeof prop === 'string') {\n    var styles = getCss(el);\n    var val = typeof value === 'function' ? value.call(el, idx, styles[prop]) : value;\n\n    if (val === '') {\n      delete styles[prop];\n    } else if (val != null) {\n      styles[prop] = val;\n    }\n\n    el.attribs.style = stringify(styles);\n  } else if (typeof prop === 'object') {\n    Object.keys(prop).forEach(function (k, i) {\n      setCss(el, k, prop[k], i);\n    });\n  }\n}\n\nfunction getCss(el, prop) {\n  if (!el || !utils_1.isTag(el)) return;\n  var styles = parse(el.attribs.style);\n\n  if (typeof prop === 'string') {\n    return styles[prop];\n  }\n\n  if (Array.isArray(prop)) {\n    var newStyles_1 = {};\n    prop.forEach(function (item) {\n      if (styles[item] != null) {\n        newStyles_1[item] = styles[item];\n      }\n    });\n    return newStyles_1;\n  }\n\n  return styles;\n}\n/**\n * Stringify `obj` to styles.\n *\n * @private\n * @category CSS\n * @param obj - Object to stringify.\n * @returns The serialized styles.\n */\n\n\nfunction stringify(obj) {\n  return Object.keys(obj).reduce(function (str, prop) {\n    return \"\" + str + (str ? ' ' : '') + prop + \": \" + obj[prop] + \";\";\n  }, '');\n}\n/**\n * Parse `styles`.\n *\n * @private\n * @category CSS\n * @param styles - Styles to be parsed.\n * @returns The parsed styles.\n */\n\n\nfunction parse(styles) {\n  styles = (styles || '').trim();\n  if (!styles) return {};\n  return styles.split(';').reduce(function (obj, str) {\n    var n = str.indexOf(':'); // Skip if there is no :, or if it is the first/last character\n\n    if (n < 1 || n === str.length - 1) return obj;\n    obj[str.slice(0, n).trim()] = str.slice(n + 1).trim();\n    return obj;\n  }, {});\n}","map":null,"metadata":{},"sourceType":"script"}