{"ast":null,"code":"import _defineProperty from \"F:\\\\BlockChain\\\\Projects\\\\feedback-dapp-full\\\\feedback-dapp\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"F:\\\\BlockChain\\\\Projects\\\\feedback-dapp-full\\\\feedback-dapp\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"F:\\\\BlockChain\\\\Projects\\\\feedback-dapp-full\\\\feedback-dapp\\\\client\\\\src\\\\App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\nimport { getBalance, loadContracts, loadCourses, loadEmails, loadFeedbacks, loadProfsByEmail, loadSkills, loadSkillsCount, setupMetamask } from \"./scripts/loader\";\nimport { useSnackbar } from \"notistack\"; // Pages\n\nimport HomePage from \"./pages/HomePage/homePage\"; // Utils\n//CSS\n\nimport \"./App.css\";\nimport Loader from \"./components/utils/Loader\";\nimport { Courses } from \"./components/Courses/courses\";\nimport { Feedbacks } from \"./components/Feedbacks/feedbacks\";\n\nrequire(\"dotenv\").config();\n\nconst App = props => {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        profEmails = _useState2[0],\n        setProfEmails = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        addressToEmail = _useState4[0],\n        setAddressToEmail = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        profsDetails = _useState6[0],\n        setProfsDetails = _useState6[1];\n\n  const _useState7 = useState(null),\n        _useState8 = _slicedToArray(_useState7, 2),\n        courses = _useState8[0],\n        setCourses = _useState8[1];\n\n  const _useState9 = useState(null),\n        _useState10 = _slicedToArray(_useState9, 2),\n        account = _useState10[0],\n        setAccount = _useState10[1];\n\n  const accountRef = useRef(account);\n\n  const _useState11 = useState(null),\n        _useState12 = _slicedToArray(_useState11, 2),\n        balance = _useState12[0],\n        setBalance = _useState12[1];\n\n  const _useState13 = useState(true),\n        _useState14 = _slicedToArray(_useState13, 2),\n        showLoader = _useState14[0],\n        setLoader = _useState14[1];\n\n  const _useState15 = useState(null),\n        _useState16 = _slicedToArray(_useState15, 2),\n        contracts = _useState16[0],\n        setContracts = _useState16[1];\n\n  const _useState17 = useState(null),\n        _useState18 = _slicedToArray(_useState17, 2),\n        skills = _useState18[0],\n        setSkills = _useState18[1];\n\n  const skillsRef = useRef(skills);\n\n  const _useState19 = useState(false),\n        _useState20 = _slicedToArray(_useState19, 2),\n        isProf = _useState20[0],\n        setIsProf = _useState20[1];\n\n  const _useSnackbar = useSnackbar(),\n        enqueueSnackbar = _useSnackbar.enqueueSnackbar; // React useEffects\n\n\n  useEffect(() => {\n    (async () => {\n      const account = await setupMetamask();\n      accountRef.current = account;\n      setAccount(account);\n      const contracts = await loadContracts();\n      setContracts(contracts);\n      const skills = await loadSkills(contracts);\n      skillsRef.current = skills;\n      setSkills(skills);\n    })();\n  }, []);\n  useEffect(() => {\n    if (contracts) {\n      (async () => {\n        const balance = await getBalance(contracts, account);\n        setBalance(balance === \"0\" ? balance : balance.slice(0, -18));\n        const profEmails = await loadEmails(contracts);\n        setProfEmails(profEmails);\n\n        const _ref = await loadProfsByEmail(contracts, profEmails),\n              profsDetails = _ref.profsDetails,\n              addressToEmail = _ref.addressToEmail;\n\n        setProfsDetails(profsDetails);\n        setAddressToEmail(addressToEmail);\n        setIsProf(addressToEmail[account] !== undefined);\n        const courses = await loadCourses(contracts, profEmails);\n        setCourses(courses);\n\n        const _ref2 = await loadFeedbacks(contracts, profEmails, courses),\n              updatedCourses = _ref2.updatedCourses;\n\n        setCourses(updatedCourses);\n\n        const _ref3 = await loadSkillsCount(contracts, profEmails, profsDetails),\n              updatedProfsDetail = _ref3.updatedProfsDetail;\n\n        setProfsDetails(updatedProfsDetail);\n        contracts.feedbackData.events.courseUpdated((err, data) => addCourse(err, data));\n        contracts.feedbackData.events.feedbackSubmitted((err, data) => feedbackSubmitted(err, data));\n        contracts.feedbackData.events.ticketGenerated((err, data) => ticketGenerated(err, data));\n        contracts.feedbackData.events.skillsUpvoted((err, data) => skillsUpvoted(err, data));\n        contracts.feedbackData.events.ratingUpdated((err, data) => ratingUpdated(err, data));\n        contracts.feedbackData.events.balanceUpdated((err, data) => balanceUpdated(err, data));\n        contracts.feedbackData.events.professorCreated((err, data) => professorCreated(err, data));\n        setLoader(false);\n      })();\n    } // eslint-disable-next-line\n\n  }, [contracts]);\n\n  const balanceUpdated = (err, data) => {\n    if (err) alert(\"something is wrong\");\n\n    if (accountRef.current === data[\"returnValues\"].account.toLowerCase()) {\n      setBalance(data[\"returnValues\"].balance === \"0\" ? data[\"returnValues\"].balance : data[\"returnValues\"].balance.slice(0, -18));\n    }\n  };\n\n  const ratingUpdated = (err, data) => {\n    if (err) alert(\"something is wrong\");\n    const _data$returnValues = data[\"returnValues\"],\n          email = _data$returnValues.email,\n          rating = _data$returnValues.rating;\n    setProfsDetails(prev => _objectSpread({}, prev, {\n      [email]: _objectSpread({}, prev[email], {\n        rating\n      })\n    }));\n  };\n\n  const skillsUpvoted = (err, data) => {\n    if (err) alert(\"something is wrong\");\n    const _data$returnValues2 = data[\"returnValues\"],\n          email = _data$returnValues2.email,\n          skills = _data$returnValues2.skills;\n    let skillCount = {};\n    skills.every(skill => skillCount[skill.name] = skill.count);\n    setProfsDetails(prev => _objectSpread({}, prev, {\n      [email]: _objectSpread({}, prev[email], {\n        skillsUpvote: skillCount\n      })\n    }));\n  };\n\n  const professorCreated = (err, data) => {\n    if (err) alert(\"something is wrong\");\n    const professor = data[\"returnValues\"].professor;\n    let name = professor.name,\n        email = professor.email,\n        profilePicture = professor.profilePicture,\n        addressId = professor.addressId,\n        rating = professor.rating;\n    addressId = addressId.toLowerCase();\n    let skillsUpvote = {};\n    skillsRef.current.every(skill => skillsUpvote[skill] = \"0\");\n    setProfsDetails(prev => _objectSpread({}, prev, {\n      [email]: {\n        name,\n        email,\n        profilePicture,\n        addressId,\n        rating,\n        skillsUpvote\n      }\n    }));\n    setProfEmails(prev => {\n      return prev.includes(email) ? [...prev] : [...prev, email];\n    });\n    setAddressToEmail(prev => _objectSpread({}, prev, {\n      [addressId]: email\n    }));\n    setIsProf(addressId === accountRef);\n  };\n\n  const ticketGenerated = (err, data) => {\n    if (err) alert(\"something is wrong\");\n    const _data$returnValues3 = data[\"returnValues\"],\n          email = _data$returnValues3.email,\n          year = _data$returnValues3.year,\n          sem = _data$returnValues3.sem,\n          code = _data$returnValues3.code;\n    setCourses(prev => _objectSpread({}, prev, {\n      [email]: _objectSpread({}, prev[email], {\n        [year]: _objectSpread({}, prev[email][year], {\n          [sem]: _objectSpread({}, prev[email][year][sem], {\n            [code]: _objectSpread({}, prev[email][year][sem][code], {\n              ticketGenerated: true\n            })\n          })\n        })\n      })\n    }));\n  };\n\n  const feedbackSubmitted = (err, data) => {\n    if (err) alert(\"something is wrong\");\n    const _data$returnValues4 = data[\"returnValues\"],\n          email = _data$returnValues4.email,\n          feedback = _data$returnValues4.feedback;\n    const code = feedback.code,\n          semester = feedback.semester,\n          year = feedback.year,\n          content = feedback.content,\n          skills = feedback.skills;\n    setCourses(prev => _objectSpread({}, prev, {\n      [email]: _objectSpread({}, prev[email], {\n        [year]: _objectSpread({}, prev[email][year], {\n          [semester]: _objectSpread({}, prev[email][year][semester], {\n            [code]: _objectSpread({}, prev[email][year][semester][code], {\n              feedbacks: prev[email][year][semester][code].feedbacks.findIndex(feed => JSON.stringify(feed) == JSON.stringify({\n                content,\n                skills\n              })) == -1 ? [...prev[email][year][semester][code].feedbacks, {\n                content,\n                skills\n              }] : [...prev[email][year][semester][code].feedbacks]\n            })\n          })\n        })\n      })\n    }));\n  };\n\n  const addCourse = (err, data) => {\n    if (err) alert(\"something is wrong\");\n    const _data$returnValues5 = data[\"returnValues\"],\n          email = _data$returnValues5.email,\n          year = _data$returnValues5.year,\n          course = _data$returnValues5.course;\n    const name = course.name,\n          code = course.code,\n          semester = course.semester,\n          studentCount = course.studentCount,\n          ticketGenerated = course.ticketGenerated;\n    setCourses(prev => {\n      return prev[email] ? _objectSpread({}, prev) : _objectSpread({}, prev, {\n        [email]: {}\n      });\n    });\n    setCourses(prev => {\n      return prev[email][year] ? _objectSpread({}, prev) : _objectSpread({}, prev, {\n        [email]: _objectSpread({}, prev[email], {\n          [year]: {}\n        })\n      });\n    });\n    setCourses(prev => {\n      return prev[email][year][semester] ? _objectSpread({}, prev) : _objectSpread({}, prev, {\n        [email]: _objectSpread({}, prev[email], {\n          [year]: _objectSpread({}, prev[email][year], {\n            [semester]: {}\n          })\n        })\n      });\n    });\n    setCourses(prev => _objectSpread({}, prev, {\n      [email]: _objectSpread({}, prev[email], {\n        [year]: _objectSpread({}, prev[email][year], {\n          [semester]: _objectSpread({}, prev[email][year][semester], {\n            [code]: {\n              name,\n              email,\n              code,\n              semester,\n              year,\n              studentCount,\n              ticketGenerated,\n              feedbacks: []\n            }\n          })\n        })\n      })\n    }));\n  };\n\n  const handleToastChange = (message, severity, open) => {\n    enqueueSnackbar(message, {\n      variant: severity\n    });\n  };\n\n  const handleLoaderChange = show => {\n    setLoader(show);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324\n    },\n    __self: this\n  }, React.createElement(Loader, {\n    show: showLoader,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325\n    },\n    __self: this\n  }), React.createElement(Routes, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326\n    },\n    __self: this\n  }, React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    element: React.createElement(HomePage, {\n      contracts: contracts,\n      profsDetails: profsDetails,\n      profsEmails: profEmails,\n      account: account,\n      emailMap: addressToEmail,\n      courses: courses,\n      isProf: isProf,\n      balance: balance,\n      onLoading: handleLoaderChange,\n      onToastChange: handleToastChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \":email/:year\",\n    element: React.createElement(Courses, {\n      showLoader: () => handleLoaderChange,\n      contracts: contracts,\n      profsDetails: profsDetails,\n      profsEmails: profEmails,\n      account: account,\n      emailMap: addressToEmail,\n      courses: courses,\n      isProf: isProf,\n      balance: balance,\n      onLoading: handleLoaderChange,\n      onToastChange: handleToastChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \":email/:year/:sem/:courseCode\",\n    element: React.createElement(Feedbacks, {\n      contracts: contracts,\n      account: account,\n      skills: skills,\n      profs: profsDetails,\n      showLoader: () => handleLoaderChange,\n      courses: courses,\n      toast: handleToastChange,\n      profsDetails: profsDetails,\n      profsEmails: profEmails,\n      emailMap: addressToEmail,\n      isProf: isProf,\n      balance: balance,\n      onLoading: handleLoaderChange,\n      onToastChange: handleToastChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364\n    },\n    __self: this\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["F:/BlockChain/Projects/feedback-dapp-full/feedback-dapp/client/src/App.js"],"names":["React","useState","useEffect","useRef","Routes","Route","getBalance","loadContracts","loadCourses","loadEmails","loadFeedbacks","loadProfsByEmail","loadSkills","loadSkillsCount","setupMetamask","useSnackbar","HomePage","Loader","Courses","Feedbacks","require","config","App","props","profEmails","setProfEmails","addressToEmail","setAddressToEmail","profsDetails","setProfsDetails","courses","setCourses","account","setAccount","accountRef","balance","setBalance","showLoader","setLoader","contracts","setContracts","skills","setSkills","skillsRef","isProf","setIsProf","enqueueSnackbar","current","slice","undefined","updatedCourses","updatedProfsDetail","feedbackData","events","courseUpdated","err","data","addCourse","feedbackSubmitted","ticketGenerated","skillsUpvoted","ratingUpdated","balanceUpdated","professorCreated","alert","toLowerCase","email","rating","prev","skillCount","every","skill","name","count","skillsUpvote","professor","profilePicture","addressId","includes","year","sem","code","feedback","semester","content","feedbacks","findIndex","feed","JSON","stringify","course","studentCount","handleToastChange","message","severity","open","variant","handleLoaderChange","show"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Routes, Route } from \"react-router-dom\";\r\nimport {\r\n  getBalance,\r\n  loadContracts,\r\n  loadCourses,\r\n  loadEmails,\r\n  loadFeedbacks,\r\n  loadProfsByEmail,\r\n  loadSkills,\r\n  loadSkillsCount,\r\n  setupMetamask,\r\n} from \"./scripts/loader\";\r\nimport { useSnackbar } from \"notistack\";\r\n\r\n// Pages\r\nimport HomePage from \"./pages/HomePage/homePage\";\r\n\r\n// Utils\r\n\r\n//CSS\r\nimport \"./App.css\";\r\nimport Loader from \"./components/utils/Loader\";\r\nimport { Courses } from \"./components/Courses/courses\";\r\nimport { Feedbacks } from \"./components/Feedbacks/feedbacks\";\r\n\r\nrequire(\"dotenv\").config();\r\n\r\nconst App = (props) => {\r\n  const [profEmails, setProfEmails] = useState(null);\r\n  const [addressToEmail, setAddressToEmail] = useState(null);\r\n\r\n  const [profsDetails, setProfsDetails] = useState(null);\r\n  const [courses, setCourses] = useState(null);\r\n\r\n  const [account, setAccount] = useState(null);\r\n  const accountRef = useRef(account);\r\n\r\n  const [balance, setBalance] = useState(null);\r\n\r\n  const [showLoader, setLoader] = useState(true);\r\n  const [contracts, setContracts] = useState(null);\r\n\r\n  const [skills, setSkills] = useState(null);\r\n  const skillsRef = useRef(skills);\r\n\r\n  const [isProf, setIsProf] = useState(false);\r\n\r\n  const { enqueueSnackbar } = useSnackbar();\r\n\r\n  // React useEffects\r\n  useEffect(() => {\r\n    (async () => {\r\n      const account = await setupMetamask();\r\n      accountRef.current = account;\r\n      setAccount(account);\r\n\r\n      const contracts = await loadContracts();\r\n      setContracts(contracts);\r\n\r\n      const skills = await loadSkills(contracts);\r\n      skillsRef.current = skills;\r\n      setSkills(skills);\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (contracts) {\r\n      (async () => {\r\n        const balance = await getBalance(contracts, account);\r\n        setBalance(balance === \"0\" ? balance : balance.slice(0, -18));\r\n\r\n        const profEmails = await loadEmails(contracts);\r\n        setProfEmails(profEmails);\r\n\r\n        const { profsDetails, addressToEmail } = await loadProfsByEmail(\r\n          contracts,\r\n          profEmails\r\n        );\r\n        setProfsDetails(profsDetails);\r\n        setAddressToEmail(addressToEmail);\r\n        setIsProf(addressToEmail[account] !== undefined);\r\n\r\n        const courses = await loadCourses(contracts, profEmails);\r\n        setCourses(courses);\r\n\r\n        const { updatedCourses } = await loadFeedbacks(\r\n          contracts,\r\n          profEmails,\r\n          courses\r\n        );\r\n        setCourses(updatedCourses);\r\n\r\n        const { updatedProfsDetail } = await loadSkillsCount(\r\n          contracts,\r\n          profEmails,\r\n          profsDetails\r\n        );\r\n        setProfsDetails(updatedProfsDetail);\r\n\r\n        contracts.feedbackData.events.courseUpdated((err, data) =>\r\n          addCourse(err, data)\r\n        );\r\n        contracts.feedbackData.events.feedbackSubmitted((err, data) =>\r\n          feedbackSubmitted(err, data)\r\n        );\r\n        contracts.feedbackData.events.ticketGenerated((err, data) =>\r\n          ticketGenerated(err, data)\r\n        );\r\n        contracts.feedbackData.events.skillsUpvoted((err, data) =>\r\n          skillsUpvoted(err, data)\r\n        );\r\n        contracts.feedbackData.events.ratingUpdated((err, data) =>\r\n          ratingUpdated(err, data)\r\n        );\r\n        contracts.feedbackData.events.balanceUpdated((err, data) =>\r\n          balanceUpdated(err, data)\r\n        );\r\n        contracts.feedbackData.events.professorCreated((err, data) =>\r\n          professorCreated(err, data)\r\n        );\r\n\r\n        setLoader(false);\r\n      })();\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [contracts]);\r\n\r\n  const balanceUpdated = (err, data) => {\r\n    if (err) alert(\"something is wrong\");\r\n\r\n    if (accountRef.current === data[\"returnValues\"].account.toLowerCase()) {\r\n      setBalance(\r\n        data[\"returnValues\"].balance === \"0\"\r\n          ? data[\"returnValues\"].balance\r\n          : data[\"returnValues\"].balance.slice(0, -18)\r\n      );\r\n    }\r\n  };\r\n\r\n  const ratingUpdated = (err, data) => {\r\n    if (err) alert(\"something is wrong\");\r\n    const { email, rating } = data[\"returnValues\"];\r\n\r\n    setProfsDetails((prev) => ({\r\n      ...prev,\r\n      [email]: { ...prev[email], rating },\r\n    }));\r\n  };\r\n\r\n  const skillsUpvoted = (err, data) => {\r\n    if (err) alert(\"something is wrong\");\r\n    const { email, skills } = data[\"returnValues\"];\r\n\r\n    let skillCount = {};\r\n    skills.every((skill) => (skillCount[skill.name] = skill.count));\r\n\r\n    setProfsDetails((prev) => ({\r\n      ...prev,\r\n      [email]: { ...prev[email], skillsUpvote: skillCount },\r\n    }));\r\n  };\r\n\r\n  const professorCreated = (err, data) => {\r\n    if (err) alert(\"something is wrong\");\r\n    const { professor } = data[\"returnValues\"];\r\n    let { name, email, profilePicture, addressId, rating } = professor;\r\n    addressId = addressId.toLowerCase();\r\n    let skillsUpvote = {};\r\n    skillsRef.current.every((skill) => (skillsUpvote[skill] = \"0\"));\r\n\r\n    setProfsDetails((prev) => ({\r\n      ...prev,\r\n      [email]: {\r\n        name,\r\n        email,\r\n        profilePicture,\r\n        addressId,\r\n        rating,\r\n        skillsUpvote,\r\n      },\r\n    }));\r\n\r\n    setProfEmails((prev) => {\r\n      return prev.includes(email) ? [...prev] : [...prev, email];\r\n    });\r\n    setAddressToEmail((prev) => ({\r\n      ...prev,\r\n      [addressId]: email,\r\n    }));\r\n\r\n    setIsProf(addressId === accountRef);\r\n  };\r\n\r\n  const ticketGenerated = (err, data) => {\r\n    if (err) alert(\"something is wrong\");\r\n    const { email, year, sem, code } = data[\"returnValues\"];\r\n    setCourses((prev) => ({\r\n      ...prev,\r\n      [email]: {\r\n        ...prev[email],\r\n        [year]: {\r\n          ...prev[email][year],\r\n          [sem]: {\r\n            ...prev[email][year][sem],\r\n            [code]: {\r\n              ...prev[email][year][sem][code],\r\n              ticketGenerated: true,\r\n            },\r\n          },\r\n        },\r\n      },\r\n    }));\r\n  };\r\n\r\n  const feedbackSubmitted = (err, data) => {\r\n    if (err) alert(\"something is wrong\");\r\n    const { email, feedback } = data[\"returnValues\"];\r\n    const { code, semester, year, content, skills } = feedback;\r\n\r\n    setCourses((prev) => ({\r\n      ...prev,\r\n      [email]: {\r\n        ...prev[email],\r\n        [year]: {\r\n          ...prev[email][year],\r\n          [semester]: {\r\n            ...prev[email][year][semester],\r\n            [code]: {\r\n              ...prev[email][year][semester][code],\r\n              feedbacks: prev[email][year][semester][code].feedbacks.findIndex(\r\n                (feed) =>\r\n                  JSON.stringify(feed) ==\r\n                  JSON.stringify({\r\n                    content,\r\n                    skills,\r\n                  })\r\n              ) == -1\r\n                ? [\r\n                  ...prev[email][year][semester][code].feedbacks,\r\n                  {\r\n                    content,\r\n                    skills,\r\n                  },\r\n                ]\r\n                : [...prev[email][year][semester][code].feedbacks],\r\n            },\r\n          },\r\n        },\r\n      },\r\n    }));\r\n  };\r\n\r\n  const addCourse = (err, data) => {\r\n    if (err) alert(\"something is wrong\");\r\n\r\n    const { email, year, course } = data[\"returnValues\"];\r\n    const { name, code, semester, studentCount, ticketGenerated } = course;\r\n\r\n    setCourses((prev) => {\r\n      return prev[email] ? { ...prev } : { ...prev, [email]: {} };\r\n    });\r\n\r\n    setCourses((prev) => {\r\n      return prev[email][year]\r\n        ? { ...prev }\r\n        : {\r\n            ...prev,\r\n            [email]: {\r\n              ...prev[email],\r\n              [year]: {},\r\n            },\r\n          };\r\n    });\r\n\r\n    setCourses((prev) => {\r\n      return prev[email][year][semester]\r\n        ? { ...prev }\r\n        : {\r\n            ...prev,\r\n            [email]: {\r\n              ...prev[email],\r\n              [year]: {\r\n                ...prev[email][year],\r\n                [semester]: {},\r\n              },\r\n            },\r\n          };\r\n    });\r\n\r\n    setCourses((prev) => ({\r\n      ...prev,\r\n      [email]: {\r\n        ...prev[email],\r\n        [year]: {\r\n          ...prev[email][year],\r\n          [semester]: {\r\n            ...prev[email][year][semester],\r\n            [code]: {\r\n              name,\r\n              email,\r\n              code,\r\n              semester,\r\n              year,\r\n              studentCount,\r\n              ticketGenerated,\r\n              feedbacks: [],\r\n            },\r\n          },\r\n        },\r\n      },\r\n    }));\r\n  };\r\n\r\n  const handleToastChange = (message, severity, open) => {\r\n    enqueueSnackbar(message, { variant: severity });\r\n  };\r\n\r\n  const handleLoaderChange = (show) => {\r\n    setLoader(show);\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Loader show={showLoader} />\r\n      <Routes>\r\n        <Route\r\n          exact\r\n          path=\"/\"\r\n          element={\r\n            <HomePage\r\n              contracts={contracts}\r\n              profsDetails={profsDetails}\r\n              profsEmails={profEmails}\r\n              account={account}\r\n              emailMap={addressToEmail}\r\n              courses={courses}\r\n              isProf={isProf}\r\n              balance={balance}\r\n              onLoading={handleLoaderChange}\r\n              onToastChange={handleToastChange}\r\n            />\r\n          }\r\n        />\r\n        <Route\r\n          exact\r\n          path=\":email/:year\"\r\n          element={\r\n            <Courses\r\n              showLoader={() => handleLoaderChange}\r\n              contracts={contracts}\r\n              profsDetails={profsDetails}\r\n              profsEmails={profEmails}\r\n              account={account}\r\n              emailMap={addressToEmail}\r\n              courses={courses}\r\n              isProf={isProf}\r\n              balance={balance}\r\n              onLoading={handleLoaderChange}\r\n              onToastChange={handleToastChange}\r\n            />\r\n          }\r\n        />\r\n        <Route\r\n          exact\r\n          path=\":email/:year/:sem/:courseCode\"\r\n          element={\r\n            <Feedbacks\r\n              contracts={contracts}\r\n              account={account}\r\n              skills={skills}\r\n              profs={profsDetails}\r\n              showLoader={() => handleLoaderChange}\r\n              courses={courses}\r\n              toast={handleToastChange}\r\n              profsDetails={profsDetails}\r\n              profsEmails={profEmails}\r\n              emailMap={addressToEmail}\r\n              isProf={isProf}\r\n              balance={balance}\r\n              onLoading={handleLoaderChange}\r\n              onToastChange={handleToastChange}\r\n            />\r\n          }\r\n        />\r\n      </Routes>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}