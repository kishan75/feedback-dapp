{"ast":null,"code":"'use strict';\n\nconst util = require('util');\n\nconst constants = require('./constants');\n\nconst MT = constants.MT;\nconst SIMPLE = constants.SIMPLE;\nconst SYMS = constants.SYMS;\n/**\n * A CBOR Simple Value that does not map onto a known constant.\n */\n\nclass Simple {\n  /**\n   * Creates an instance of Simple.\n   *\n   * @param {number} value - the simple value's integer value\n   */\n  constructor(value) {\n    if (typeof value !== 'number') {\n      throw new Error('Invalid Simple type: ' + typeof value);\n    }\n\n    if (value < 0 || value > 255 || (value | 0) !== value) {\n      throw new Error('value must be a small positive integer: ' + value);\n    }\n\n    this.value = value;\n  }\n  /**\n   * Debug string for simple value\n   *\n   * @returns {string} simple(value)\n   */\n\n\n  toString() {\n    return 'simple(' + this.value + ')';\n  }\n  /**\n   * Debug string for simple value\n   *\n   * @returns {string} simple(value)\n   */\n\n\n  [util.inspect.custom](depth, opts) {\n    return 'simple(' + this.value + ')';\n  }\n  /**\n   * Debug string for simple value (backward-compatibility version)\n   *\n   * @returns {string} simple(value)\n   */\n\n\n  inspect(depth, opts) {\n    return 'simple(' + this.value + ')';\n  }\n  /**\n   * Push the simple value onto the CBOR stream\n   *\n   * @param {Object} gen The generator to push onto\n   */\n\n\n  encodeCBOR(gen) {\n    return gen._pushInt(this.value, MT.SIMPLE_FLOAT);\n  }\n  /**\n   * Is the given object a Simple?\n   *\n   * @param {any} obj - object to test\n   * @returns {boolean} - is it Simple?\n   */\n\n\n  static isSimple(obj) {\n    return obj instanceof Simple;\n  }\n  /**\n   * Decode from the CBOR additional information into a JavaScript value.\n   * If the CBOR item has no parent, return a \"safe\" symbol instead of\n   * `null` or `undefined`, so that the value can be passed through a\n   * stream in object mode.\n   *\n   * @param {number} val - the CBOR additional info to convert\n   * @param {boolean} [has_parent=true] - Does the CBOR item have a parent?\n   * @param {boolean} [parent_indefinite=false] - Is the parent element\n   *   indefinitely encoded?\n   * @returns {(null|undefined|boolean|Symbol|Simple)} - the decoded value\n   */\n\n\n  static decode(val, has_parent = true, parent_indefinite = false) {\n    switch (val) {\n      case SIMPLE.FALSE:\n        return false;\n\n      case SIMPLE.TRUE:\n        return true;\n\n      case SIMPLE.NULL:\n        if (has_parent) {\n          return null;\n        } else {\n          return SYMS.NULL;\n        }\n\n      case SIMPLE.UNDEFINED:\n        if (has_parent) {\n          return void 0;\n        } else {\n          return SYMS.UNDEFINED;\n        }\n\n      case -1:\n        if (!has_parent || !parent_indefinite) {\n          throw new Error('Invalid BREAK');\n        }\n\n        return SYMS.BREAK;\n\n      default:\n        return new Simple(val);\n    }\n  }\n\n}\n\nmodule.exports = Simple;","map":null,"metadata":{},"sourceType":"script"}