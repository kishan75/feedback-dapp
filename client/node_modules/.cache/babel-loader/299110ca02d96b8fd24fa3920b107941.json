{"ast":null,"code":"/**\n *\n * @namespace faker.helpers\n */\nvar Helpers = function (faker) {\n  var self = this;\n  /**\n   * backward-compatibility\n   *\n   * @method faker.helpers.randomize\n   * @param {array} array\n   */\n\n  self.randomize = function (array) {\n    array = array || [\"a\", \"b\", \"c\"];\n    return faker.random.arrayElement(array);\n  };\n  /**\n   * slugifies string\n   *\n   * @method faker.helpers.slugify\n   * @param {string} string\n   */\n\n\n  self.slugify = function (string) {\n    string = string || \"\";\n    return string.replace(/ /g, '-').replace(/[^\\一-龠\\ぁ-ゔ\\ァ-ヴー\\w\\.\\-]+/g, '');\n  };\n  /**\n   * parses string for a symbol and replace it with a random number from 1-10\n   *\n   * @method faker.helpers.replaceSymbolWithNumber\n   * @param {string} string\n   * @param {string} symbol defaults to `\"#\"`\n   */\n\n\n  self.replaceSymbolWithNumber = function (string, symbol) {\n    string = string || \"\"; // default symbol is '#'\n\n    if (symbol === undefined) {\n      symbol = '#';\n    }\n\n    var str = '';\n\n    for (var i = 0; i < string.length; i++) {\n      if (string.charAt(i) == symbol) {\n        str += faker.datatype.number(9);\n      } else if (string.charAt(i) == \"!\") {\n        str += faker.datatype.number({\n          min: 2,\n          max: 9\n        });\n      } else {\n        str += string.charAt(i);\n      }\n    }\n\n    return str;\n  };\n  /**\n   * parses string for symbols (numbers or letters) and replaces them appropriately (# will be replaced with number,\n   * ? with letter and * will be replaced with number or letter)\n   *\n   * @method faker.helpers.replaceSymbols\n   * @param {string} string\n   */\n\n\n  self.replaceSymbols = function (string) {\n    string = string || \"\";\n    var alpha = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\n    var str = '';\n\n    for (var i = 0; i < string.length; i++) {\n      if (string.charAt(i) == \"#\") {\n        str += faker.datatype.number(9);\n      } else if (string.charAt(i) == \"?\") {\n        str += faker.random.arrayElement(alpha);\n      } else if (string.charAt(i) == \"*\") {\n        str += faker.datatype.boolean() ? faker.random.arrayElement(alpha) : faker.datatype.number(9);\n      } else {\n        str += string.charAt(i);\n      }\n    }\n\n    return str;\n  };\n  /**\n   * replace symbols in a credit card schems including Luhn checksum\n   *\n   * @method faker.helpers.replaceCreditCardSymbols\n   * @param {string} string\n   * @param {string} symbol\n   */\n\n\n  self.replaceCreditCardSymbols = function (string, symbol) {\n    // default values required for calling method without arguments\n    string = string || \"6453-####-####-####-###L\";\n    symbol = symbol || \"#\"; // Function calculating the Luhn checksum of a number string\n\n    var getCheckBit = function (number) {\n      number.reverse();\n      number = number.map(function (num, index) {\n        if (index % 2 === 0) {\n          num *= 2;\n\n          if (num > 9) {\n            num -= 9;\n          }\n        }\n\n        return num;\n      });\n      var sum = number.reduce(function (prev, curr) {\n        return prev + curr;\n      });\n      return sum % 10;\n    };\n\n    string = faker.helpers.regexpStyleStringParse(string); // replace [4-9] with a random number in range etc...\n\n    string = faker.helpers.replaceSymbolWithNumber(string, symbol); // replace ### with random numbers\n\n    var numberList = string.replace(/\\D/g, \"\").split(\"\").map(function (num) {\n      return parseInt(num);\n    });\n    var checkNum = getCheckBit(numberList);\n    return string.replace(\"L\", checkNum);\n  };\n  /** string repeat helper, alternative to String.prototype.repeat.... See PR #382\n  *\n  * @method faker.helpers.repeatString\n  * @param {string} string\n  * @param {number} num\n  */\n\n\n  self.repeatString = function (string, num) {\n    if (typeof num === \"undefined\") {\n      num = 0;\n    }\n\n    var text = \"\";\n\n    for (var i = 0; i < num; i++) {\n      text += string.toString();\n    }\n\n    return text;\n  };\n  /**\n   * parse string patterns in a similar way to RegExp\n   *\n   * e.g. \"#{3}test[1-5]\" -> \"###test4\"\n   *\n   * @method faker.helpers.regexpStyleStringParse\n   * @param {string} string\n   */\n\n\n  self.regexpStyleStringParse = function (string) {\n    string = string || \"\"; // Deal with range repeat `{min,max}`\n\n    var RANGE_REP_REG = /(.)\\{(\\d+)\\,(\\d+)\\}/;\n    var REP_REG = /(.)\\{(\\d+)\\}/;\n    var RANGE_REG = /\\[(\\d+)\\-(\\d+)\\]/;\n    var min, max, tmp, repetitions;\n    var token = string.match(RANGE_REP_REG);\n\n    while (token !== null) {\n      min = parseInt(token[2]);\n      max = parseInt(token[3]); // switch min and max\n\n      if (min > max) {\n        tmp = max;\n        max = min;\n        min = tmp;\n      }\n\n      repetitions = faker.datatype.number({\n        min: min,\n        max: max\n      });\n      string = string.slice(0, token.index) + faker.helpers.repeatString(token[1], repetitions) + string.slice(token.index + token[0].length);\n      token = string.match(RANGE_REP_REG);\n    } // Deal with repeat `{num}`\n\n\n    token = string.match(REP_REG);\n\n    while (token !== null) {\n      repetitions = parseInt(token[2]);\n      string = string.slice(0, token.index) + faker.helpers.repeatString(token[1], repetitions) + string.slice(token.index + token[0].length);\n      token = string.match(REP_REG);\n    } // Deal with range `[min-max]` (only works with numbers for now)\n    //TODO: implement for letters e.g. [0-9a-zA-Z] etc.\n\n\n    token = string.match(RANGE_REG);\n\n    while (token !== null) {\n      min = parseInt(token[1]); // This time we are not capturing the char before `[]`\n\n      max = parseInt(token[2]); // switch min and max\n\n      if (min > max) {\n        tmp = max;\n        max = min;\n        min = tmp;\n      }\n\n      string = string.slice(0, token.index) + faker.datatype.number({\n        min: min,\n        max: max\n      }).toString() + string.slice(token.index + token[0].length);\n      token = string.match(RANGE_REG);\n    }\n\n    return string;\n  };\n  /**\n   * takes an array and randomizes it in place then returns it\n   * \n   * uses the modern version of the Fisher–Yates algorithm\n   *\n   * @method faker.helpers.shuffle\n   * @param {array} o\n   */\n\n\n  self.shuffle = function (o) {\n    if (typeof o === 'undefined' || o.length === 0) {\n      return o || [];\n    }\n\n    o = o || [\"a\", \"b\", \"c\"];\n\n    for (var x, j, i = o.length - 1; i > 0; --i) {\n      j = faker.datatype.number(i);\n      x = o[i];\n      o[i] = o[j];\n      o[j] = x;\n    }\n\n    return o;\n  };\n  /**\n   * mustache\n   *\n   * @method faker.helpers.mustache\n   * @param {string} str\n   * @param {object} data\n   */\n\n\n  self.mustache = function (str, data) {\n    if (typeof str === 'undefined') {\n      return '';\n    }\n\n    for (var p in data) {\n      var re = new RegExp('{{' + p + '}}', 'g');\n      str = str.replace(re, data[p]);\n    }\n\n    return str;\n  };\n  /**\n   * createCard\n   *\n   * @method faker.helpers.createCard\n   */\n\n\n  self.createCard = function () {\n    return {\n      \"name\": faker.name.findName(),\n      \"username\": faker.internet.userName(),\n      \"email\": faker.internet.email(),\n      \"address\": {\n        \"streetA\": faker.address.streetName(),\n        \"streetB\": faker.address.streetAddress(),\n        \"streetC\": faker.address.streetAddress(true),\n        \"streetD\": faker.address.secondaryAddress(),\n        \"city\": faker.address.city(),\n        \"state\": faker.address.state(),\n        \"country\": faker.address.country(),\n        \"zipcode\": faker.address.zipCode(),\n        \"geo\": {\n          \"lat\": faker.address.latitude(),\n          \"lng\": faker.address.longitude()\n        }\n      },\n      \"phone\": faker.phone.phoneNumber(),\n      \"website\": faker.internet.domainName(),\n      \"company\": {\n        \"name\": faker.company.companyName(),\n        \"catchPhrase\": faker.company.catchPhrase(),\n        \"bs\": faker.company.bs()\n      },\n      \"posts\": [{\n        \"words\": faker.lorem.words(),\n        \"sentence\": faker.lorem.sentence(),\n        \"sentences\": faker.lorem.sentences(),\n        \"paragraph\": faker.lorem.paragraph()\n      }, {\n        \"words\": faker.lorem.words(),\n        \"sentence\": faker.lorem.sentence(),\n        \"sentences\": faker.lorem.sentences(),\n        \"paragraph\": faker.lorem.paragraph()\n      }, {\n        \"words\": faker.lorem.words(),\n        \"sentence\": faker.lorem.sentence(),\n        \"sentences\": faker.lorem.sentences(),\n        \"paragraph\": faker.lorem.paragraph()\n      }],\n      \"accountHistory\": [faker.helpers.createTransaction(), faker.helpers.createTransaction(), faker.helpers.createTransaction()]\n    };\n  };\n  /**\n   * contextualCard\n   *\n   * @method faker.helpers.contextualCard\n   */\n\n\n  self.contextualCard = function () {\n    var name = faker.name.firstName(),\n        userName = faker.internet.userName(name);\n    return {\n      \"name\": name,\n      \"username\": userName,\n      \"avatar\": faker.internet.avatar(),\n      \"email\": faker.internet.email(userName),\n      \"dob\": faker.date.past(50, new Date(\"Sat Sep 20 1992 21:35:02 GMT+0200 (CEST)\")),\n      \"phone\": faker.phone.phoneNumber(),\n      \"address\": {\n        \"street\": faker.address.streetName(true),\n        \"suite\": faker.address.secondaryAddress(),\n        \"city\": faker.address.city(),\n        \"zipcode\": faker.address.zipCode(),\n        \"geo\": {\n          \"lat\": faker.address.latitude(),\n          \"lng\": faker.address.longitude()\n        }\n      },\n      \"website\": faker.internet.domainName(),\n      \"company\": {\n        \"name\": faker.company.companyName(),\n        \"catchPhrase\": faker.company.catchPhrase(),\n        \"bs\": faker.company.bs()\n      }\n    };\n  };\n  /**\n   * userCard\n   *\n   * @method faker.helpers.userCard\n   */\n\n\n  self.userCard = function () {\n    return {\n      \"name\": faker.name.findName(),\n      \"username\": faker.internet.userName(),\n      \"email\": faker.internet.email(),\n      \"address\": {\n        \"street\": faker.address.streetName(true),\n        \"suite\": faker.address.secondaryAddress(),\n        \"city\": faker.address.city(),\n        \"zipcode\": faker.address.zipCode(),\n        \"geo\": {\n          \"lat\": faker.address.latitude(),\n          \"lng\": faker.address.longitude()\n        }\n      },\n      \"phone\": faker.phone.phoneNumber(),\n      \"website\": faker.internet.domainName(),\n      \"company\": {\n        \"name\": faker.company.companyName(),\n        \"catchPhrase\": faker.company.catchPhrase(),\n        \"bs\": faker.company.bs()\n      }\n    };\n  };\n  /**\n   * createTransaction\n   *\n   * @method faker.helpers.createTransaction\n   */\n\n\n  self.createTransaction = function () {\n    return {\n      \"amount\": faker.finance.amount(),\n      \"date\": new Date(2012, 1, 2),\n      //TODO: add a ranged date method\n      \"business\": faker.company.companyName(),\n      \"name\": [faker.finance.accountName(), faker.finance.mask()].join(' '),\n      \"type\": self.randomize(faker.definitions.finance.transaction_type),\n      \"account\": faker.finance.account()\n    };\n  };\n\n  return self;\n};\n/*\nString.prototype.capitalize = function () { //v1.0\n    return this.replace(/\\w+/g, function (a) {\n        return a.charAt(0).toUpperCase() + a.substr(1).toLowerCase();\n    });\n};\n*/\n\n\nmodule['exports'] = Helpers;","map":null,"metadata":{},"sourceType":"script"}